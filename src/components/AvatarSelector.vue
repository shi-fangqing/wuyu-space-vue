<script setup>
import { ref } from 'vue'

const props = defineProps({
  show: Boolean,
  currentAvatar: String,
  onClose: Function,
  onSelect: Function
})

// È¢ÑËÆæÂ§¥ÂÉèÂàóË°®
const avatars = [
  {
    id: 'robot1',
    emoji: 'ü§ñ',
    name: 'Êú∫Âô®‰∫∫'
  },
  {
    id: 'cat',
    emoji: 'üê±',
    name: 'Áå´Âí™Âä©Êâã'
  },
  {
    id: 'alien',
    emoji: 'üëΩ',
    name: 'Â§ñÊòüÂä©Êâã'
  },
  {
    id: 'ghost',
    emoji: 'üëª',
    name: 'ÂπΩÁÅµÂä©Êâã'
  },
  {
    id: 'angel',
    emoji: 'üëº',
    name: 'Â§©‰ΩøÂä©Êâã'
  },
  {
    id: 'wizard',
    emoji: 'üßô‚Äç‚ôÇÔ∏è',
    name: 'Â∑´Â∏àÂä©Êâã'
  },
  {
    id: 'ninja',
    emoji: 'ü•∑',
    name: 'ÂøçËÄÖÂä©Êâã'
  },
  {
    id: 'scientist',
    emoji: 'üë®‚Äçüî¨',
    name: 'ÁßëÂ≠¶ÂÆ∂Âä©Êâã'
  }
]

const handleSelect = (avatar) => {
  props.onSelect(avatar)
  props.onClose()
}
</script>

<template>
  <div v-if="show" class="avatar-selector-overlay" @click="onClose">
    <div class="avatar-selector" @click.stop>
      <div class="selector-header">
        <h3>ÈÄâÊã©Â§¥ÂÉè</h3>
        <button class="close-btn" @click="onClose">√ó</button>
      </div>
      
      <div class="avatars-grid">
        <div
          v-for="avatar in avatars"
          :key="avatar.id"
          :class="['avatar-item', { active: currentAvatar === avatar.emoji }]"
          @click="handleSelect(avatar)"
        >
          <span class="avatar-emoji">{{ avatar.emoji }}</span>
          <span class="avatar-name">{{ avatar.name }}</span>
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.avatar-selector-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.avatar-selector {
  background: var(--bg-card);
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 400px;
  box-shadow: var(--shadow-lg);
}

.selector-header {
  padding: 1rem;
  border-bottom: 1px solid rgba(0,0,0,0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.selector-header h3 {
  margin: 0;
  color: var(--text-primary);
}

.close-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 0.5rem;
}

.avatars-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  gap: 1rem;
  padding: 1.5rem;
}

.avatar-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all 0.3s ease;
}

.avatar-item:hover {
  background: var(--bg-primary);
  transform: translateY(-2px);
}

.avatar-item.active {
  background: var(--primary-gradient);
  color: white;
}

.avatar-emoji {
  font-size: 2rem;
}

.avatar-name {
  font-size: 0.8rem;
  text-align: center;
}
</style> 