import{_ as p,r as _,o as k,a as l,c as n,b as e,t as i,F as y,d as g,w as T,e as C,f as $,v as L,g as b,h as F,n as M}from"./main-C2ldvEzx.js";import{l as B,a as I}from"./markdown-CL00-ZL1.js";const N={class:"article-header"},z={class:"article-meta"},E={class:"article-tags"},S={class:"article-content"},V=["innerHTML"],q={__name:"ArticleDetail",props:{article:{type:Object,required:!0},onClose:{type:Function,required:!0}},setup(o){const v=o,r=_(""),d=m=>{const c=new Date(m);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"long",day:"numeric"}).format(c)};return k(async()=>{const m=await B(v.article.id);r.value=m.content,console.log(r.value)}),(m,c)=>(l(),n("div",{class:"article-detail-overlay",onClick:c[2]||(c[2]=(...u)=>o.onClose&&o.onClose(...u))},[e("div",{class:"article-detail",onClick:c[1]||(c[1]=T(()=>{},["stop"]))},[e("button",{class:"close-btn",onClick:c[0]||(c[0]=(...u)=>o.onClose&&o.onClose(...u))},"×"),e("div",N,[e("h1",null,i(o.article.title),1),e("div",z,[e("span",null,i(d(o.article.date)),1),e("span",null,i(o.article.category),1)]),e("div",E,[(l(!0),n(y,null,g(o.article.tags,u=>(l(),n("span",{key:u,class:"tag"},i(u),1))),128))])]),e("div",S,[e("div",{innerHTML:r.value},null,8,V)])])]))}},H=p(q,[["__scopeId","data-v-c5a6756c"]]),O={class:"articles"},j={class:"search-section"},Q={class:"search-box"},U={class:"tags-filter"},G=["onClick"],J={class:"article-list"},K={key:0,class:"no-results"},P=["onClick"],R={class:"article-meta"},W={class:"article-desc"},X={class:"article-tags"},Y={__name:"index",setup(o){const v=_([]),r=_(""),d=_([]),m=async()=>{v.value=await I(),console.log(v.value)};k(async()=>{await m()});const c=C(()=>{const s=new Set;return v.value.forEach(a=>{a.tags.forEach(t=>s.add(t))}),Array.from(s)}),u=C(()=>v.value.filter(s=>{const a=r.value===""||s.title.toLowerCase().includes(r.value.toLowerCase())||s.description.toLowerCase().includes(r.value.toLowerCase()),t=d.value.length===0||d.value.every(h=>s.tags.includes(h));return a&&t})),w=s=>{const a=d.value.indexOf(s);a===-1?d.value.push(s):d.value.splice(a,1)},f=_(null),D=s=>{f.value=s},x=()=>{f.value=null},A=s=>{const a=new Date(s);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"long",day:"numeric"}).format(a)};return(s,a)=>(l(),n("div",O,[e("div",j,[e("div",Q,[$(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),type:"text",placeholder:"搜索文章...",class:"search-input"},null,512),[[L,r.value]]),a[1]||(a[1]=e("span",{class:"search-icon"},"🔍",-1))]),e("div",U,[(l(!0),n(y,null,g(c.value,t=>(l(),n("div",{key:t,class:M(["filter-tag",{active:d.value.includes(t)}]),onClick:h=>w(t)},i(t),11,G))),128))])]),e("div",J,[u.value.length===0?(l(),n("div",K," 没有找到匹配的文章 ")):(l(!0),n(y,{key:1},g(u.value,t=>(l(),n("div",{key:t.id,class:"article-card",onClick:h=>D(t)},[e("h2",null,i(t.title),1),e("div",R,[e("span",null,i(A(t.date)),1),e("span",null,i(t.category),1)]),e("p",W,i(t.description),1),e("div",X,[(l(!0),n(y,null,g(t.tags,h=>(l(),n("span",{key:h,class:"tag"},i(h),1))),128))])],8,P))),128))]),f.value?(l(),b(H,{key:0,article:f.value,onClose:x},null,8,["article"])):F("",!0)]))}},te=p(Y,[["__scopeId","data-v-e2af6038"]]);export{te as default};
